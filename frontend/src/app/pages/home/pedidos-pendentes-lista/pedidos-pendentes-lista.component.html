<mat-card class="pedidos-pendentes">

    <mat-card-title class="pedidos-pendentes__header">

        <h5 class="pedidos-pendentes__title">Pedidos pendentes</h5>

        <div fxLayout="row" fxLayoutAlign="space-between center">
            <button mat-flat-button (click)="navigateToPedidos()">
                Meus pedidos
            </button>
            <button mat-raised-button class="btn-meus-pedidos" (click)="navigateToNovoPedido()">
                Novo pedido
            </button>
        </div>

    </mat-card-title>

    <mat-card-content class="pedidos-pendentes__content">

        <div class="table-content mat-elevation-z8">

            <app-badge color="warning" *ngIf="pedidos.length === 0; else tablePedidos">
                Não foram encontrados pedidos relacionados à esta comanda
            </app-badge>

            <ng-template #tablePedidos>
                <table mat-table [dataSource]="dataSource">

                    <!-- Context Menu Column -->
                    <ng-container matColumnDef="actions">
                        <th mat-header-cell *matHeaderCellDef></th>
                        <td mat-cell *matCellDef="let element">
                            <button mat-icon-button [matMenuTriggerFor]="menu" aria-label="Opções para este pedido">
                                <mat-icon>more_vert</mat-icon>
                            </button>
                            <mat-menu #menu="matMenu" yPosition="above">
                                <button mat-menu-item (click)="editarPedido(element)">
                                    <mat-icon>edit</mat-icon>
                                    <span>Editar</span>
                                </button>
                                <button mat-menu-item (click)="cancelarPedido(element)">
                                    <mat-icon>close</mat-icon>
                                    <span>Cancelar</span>
                                </button>
                            </mat-menu>
                        </td>
                    </ng-container>

                    <!-- Code Column -->
                    <ng-container matColumnDef="pedidoId">
                        <th mat-header-cell *matHeaderCellDef> Código </th>
                        <td mat-cell *matCellDef="let element"> {{element.pedidoId}} </td>
                    </ng-container>

                    <!-- Product Column -->
                    <ng-container matColumnDef="produto">
                        <th mat-header-cell *matHeaderCellDef> Produto </th>
                        <td mat-cell *matCellDef="let element"> {{element.produto.nome}} </td>
                    </ng-container>

                    <!-- Amount Column -->
                    <ng-container matColumnDef="quantidade">
                        <th mat-header-cell *matHeaderCellDef> Quantidade </th>
                        <td mat-cell *matCellDef="let element">
                            {{ element.quantidade }}
                            <span *ngIf="element.quantidade === 1; else spanUnidades">unidade</span>
                            <ng-template #spanUnidades>
                                <span>
                                    unidades
                                </span>
                            </ng-template>
                        </td>
                    </ng-container>

                    <!-- Value Column -->
                    <ng-container matColumnDef="valor">
                        <th mat-header-cell *matHeaderCellDef> Valor </th>
                        <td mat-cell *matCellDef="let element"> {{element.quantidade * element.produto.valor | currency:
                            'BRL'}} </td>
                    </ng-container>

                    <!-- Status Column -->
                    <ng-container matColumnDef="status">
                        <th mat-header-cell *matHeaderCellDef> Status </th>
                        <td mat-cell *matCellDef="let element">
                            <ng-container [ngSwitch]="element.statusEnum">
                                <app-badge *ngSwitchCase="1" color="warning">Em andamento</app-badge>
                                <app-badge *ngSwitchCase="2" color="success">Entregue</app-badge>
                                <app-badge *ngSwitchCase="3" color="danger">Cancelado</app-badge>
                                <app-badge *ngSwitchDefault color="default">Não definido</app-badge>
                            </ng-container>
                        </td>
                    </ng-container>

                    <tr mat-header-row *matHeaderRowDef="displayedColumns; sticky: true"></tr>
                    <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>

                </table>
            </ng-template>

        </div>

    </mat-card-content>

</mat-card>